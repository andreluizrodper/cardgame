import{E as S,_ as N,r as m,o as d,c as n,a as e,t as i,b as o,h,e as C,C as D,I,f as H,G as j,H as E,w as u,F as p,m as M,J as L,d as G,K as A,M as F}from"./index-jykuHw9E.js";import{H as R,E as U,G as J,S as K,M as O}from"./mana-BkQ1J12w.js";import{H as Y}from"./heart-C1RxRAWQ.js";import{S as Z,G as q,C as P,a as Q}from"./sword-DUkdIWjN.js";import{a as W,u as X,c as $}from"./deck-ZDgDFAMr.js";/**
 * @license lucide-vue-next v0.390.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=S("ChevronLeftIcon",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-vue-next v0.390.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=S("EyeIcon",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),te={components:{Heart:Y,Sword:Z,Gem:q},props:{artwork:{type:String},card:{type:Object}},emits:["toggleCard"],methods:{toggleCard(){this.$emit("toggleCard",this.card)}}},oe={class:"relative"},ae=["src"],le={class:"absolute top-2 right-2 border rounded bg-white px-1 text-xs shadow-sm"},de={class:"text-base flex-1 text-left px-2 py-2"},re={class:"p-2 pb-1 flex flex-col w-full"},ne={key:0,class:"flex justify-between w-full"},ce={class:"flex gap-2"},ie={class:"flex gap-2 items-center"},me={class:"flex gap-2 items-center"},he={class:"flex gap-2 items-center"},ue={key:1,class:"flex justify-between w-full"},_e={class:"flex gap-2 items-center"};function fe(s,t,c,V,r,a){const k=m("Sword"),w=m("Heart"),_=m("Gem");return d(),n("button",{onClick:t[0]||(t[0]=(...g)=>a.toggleCard&&a.toggleCard(...g)),class:"border rounded bg-white min-w-48 max-w-48 max-auto flex flex-col flex-1"},[e("div",oe,[e("img",{src:c.card.artwork},null,8,ae),e("div",le,i(c.card.manaType??c.card.type),1)]),e("div",de,i(c.card.name),1),e("div",re,[c.card.manaNeeded?(d(),n("div",ne,[e("div",ce,[e("div",ie,[o(k,{size:"16"}),h(" "+i(c.card.attack),1)]),e("div",me,[o(w,{size:"16"}),h(" "+i(c.card.defense),1)])]),e("div",he,[o(_,{size:"16"}),h(" "+i(c.card.manaNeeded),1)])])):C("",!0),c.card.manaValue?(d(),n("div",ue,[e("div",_e,[o(_,{size:"16"}),h(" "+i(c.card.manaValue),1)])])):C("",!0)])])}const Ce=N(te,[["render",fe]]),ge={components:{NavBar:D,ChevronLeft:ee,Input:I,Card:Ce,ChevronDown:P,ChevronUp:Q,Button:H,ChevronRight:j,Home:E,Eye:se},computed:{buttonText(){return this.$route.params.id?"Save":"Create"},spellCardsCount(){return this.selectedCards.filter(s=>s.manaNeeded).length},manaCardsCount(){return this.selectedCards.filter(s=>s.manaValue).length},selectedCardsCount(){return this.selectedCards.length},selectedCardsNames(){return this.selectedCards.map(s=>s.name)},availableCards(){const s=this.search.toLowerCase();return this.cards.filter(t=>!this.selectedCardsNames.includes(t.name)).filter(t=>t.name.toLowerCase().includes(s))},isValid(){return this.name.length>4&&this.spellCardsCount>=40}},data(){return{collectionSelected:!1,search:"",selectedCards:[],artwork:null,cards:[],name:"",collectionName:null,collections:[R,U,J,K,O],hoveredCard:null,showModal:!1,selectedCardForModal:null}},async mounted(){if(this.$route.params.id){const s=await W(this.$route.params.id);this.name=s.data().name,this.selectedCards=s.data().cards}},methods:{selectCollection(s){this.collectionSelected=!0,this.collectionName=s.name;const t=s.cards.map(c=>({...c,artwork:s.artwork}));this.cards=t},toggleCard(s){this.selectedCards.some(t=>t.name===s.name)?this.selectedCards=this.selectedCards.filter(t=>t.name!==s.name):this.selectedCards.push(s)},save(){this.$route.params.id?(X({id:this.$route.params.id,data:{name:this.name,cards:this.selectedCards}}),this.$store.commit("addToast",{description:"Deck updated!"})):($({data:{name:this.name,cards:this.selectedCards}}),this.$store.commit("addToast",{description:"Deck created!"})),this.$router.push({name:"decks"})},removeAllCards(){this.selectedCards=[]},showCardDetails(s){this.selectedCardForModal=s,this.showModal=!0},closeModal(){this.showModal=!1,this.selectedCardForModal=null}}},b=s=>(A("data-v-80694201"),s=s(),F(),s),ve={class:"bg-stone-500"},xe={class:"flex min-h-[100vh] flex-col md:mx-auto max-w-7xl shadow bg-white"},pe={class:"sticky top-0 left-0 right-0 flex flex-col z-30"},be={class:"flex flex-col py-3 border-b bg-gray-100 gap-2"},ke={class:"px-4 text-sm flex gap-2 items-center"},we={key:0},ye={key:1},Me={class:"flex justify-between px-4 items-center"},ze={class:"max-w-96 w-full"},Se={class:"flex gap-4 items-center"},Ne=b(()=>e("div",null,null,-1)),Ve={class:"px-4 py-2 flex items-center justify-between"},Te={class:"flex items-center gap-2"},Be={class:"border rounded px-4 bg-gray-50 py-1 text-sm"},De={class:"border rounded px-4 bg-gray-50 py-1 text-sm"},Ie={class:"flex-1 relative overflow-hidden flex flex-col md:flex-row"},He={class:"w-full md:w-2/6 p-4 order-1 md:order-2"},je=b(()=>e("h2",{class:"text-xl font-bold mb-4"},"Your Deck",-1)),Ee={class:"flex flex-col gap-2 max-h-[200px] md:max-h-full overflow-y-auto md:overflow-y-visible"},Le={key:0,class:"text-gray-500 text-center"},Ge=b(()=>e("br",null,null,-1)),Ae=["onMouseenter","onClick"],Fe={key:0,class:"absolute z-10 right-full top-0 ml-2 hidden md:block",style:{"pointer-events":"none"}},Re={class:"w-full md:w-4/6 p-4 border-b md:border-b-0 md:border-r order-2 md:order-1"},Ue=b(()=>e("h2",{class:"text-xl font-bold mb-4"},"Collection",-1)),Je={key:0,class:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 xl:grid-cols-8 gap-2"},Ke=["onClick"],Oe=["src"],Ye={class:"px-2 py-2 bg-stone-50 text-gray-800 flex flex-col gap-1"},Ze={class:"text-xs truncate"},qe={class:"text-xs"},Pe={key:1},Qe={class:"flex justify-between mb-4 items-center"},We={class:"text-gray-400 text-sm"},Xe={class:"flex flex-wrap gap-2 items-center justify-center"},$e={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},es={class:"bg-white p-4 rounded-lg max-w-sm w-full"};function ss(s,t,c,V,r,a){const k=m("NavBar"),w=m("Home"),_=m("router-link"),g=m("ChevronRight"),z=m("Input"),v=m("Button"),y=m("Card"),T=m("Eye"),B=m("ChevronLeft");return d(),n(p,null,[e("div",ve,[e("div",xe,[e("div",pe,[o(k),e("div",be,[e("div",ke,[o(_,{to:{name:"lobby"},class:"flex items-center gap-2 text-sm"},{default:u(()=>[o(w,{size:"16"}),h(" Lobby ")]),_:1}),o(g,{size:"14"}),o(_,{to:{name:"decks"},class:"flex gap-1 items-center text-sm"},{default:u(()=>[h(" My decks ")]),_:1}),o(g,{size:"14"}),s.$route.params.id?(d(),n("span",we," Editing deck ")):(d(),n("span",ye," Creating deck "))]),e("div",Me,[e("div",ze,[o(z,{modelValue:r.name,"onUpdate:modelValue":t[0]||(t[0]=l=>r.name=l),placeholder:"Deck name"},null,8,["modelValue"])]),e("div",Se,[Ne,o(v,{size:"sm",disabled:!a.isValid,onClick:a.save},{default:u(()=>[h(i(a.buttonText),1)]),_:1},8,["disabled","onClick"])])])])]),e("div",Ve,[e("div",Te,[e("div",Be,i(a.spellCardsCount)+" cards ",1),e("div",De,i(a.manaCardsCount)+" mana cards ",1)]),o(v,{size:"sm",onClick:a.removeAllCards,disabled:r.selectedCards.length===0},{default:u(()=>[h(" Remove All Cards ")]),_:1},8,["onClick","disabled"])]),e("div",Ie,[e("div",He,[je,e("div",Ee,[r.selectedCards.length===0?(d(),n("div",Le,[h(" No cards in your deck. "),Ge,h(" Add cards from the collection. ")])):C("",!0),(d(!0),n(p,null,M(r.selectedCards,(l,f)=>(d(),n("div",{key:f,class:"relative"},[e("div",{class:"border rounded p-2 cursor-pointer hover:shadow-md transition-shadow",onMouseenter:x=>r.hoveredCard=l,onMouseleave:t[1]||(t[1]=x=>r.hoveredCard=null),onClick:x=>a.toggleCard(l)},i(l.name),41,Ae),r.hoveredCard===l?(d(),n("div",Fe,[o(y,{card:l,onToggleCard:a.toggleCard},null,8,["card","onToggleCard"])])):C("",!0),o(v,{class:"absolute top-0 right-0 p-1 lg:hidden",size:"sm",onClick:L(x=>a.showCardDetails(l),["stop"])},{default:u(()=>[o(T,{size:"16"})]),_:2},1032,["onClick"])]))),128))])]),e("div",Re,[Ue,r.collectionSelected?(d(),n("div",Pe,[e("button",{class:"flex gap-2 items-center mb-4",onClick:t[2]||(t[2]=l=>r.collectionSelected=!1)},[o(B,{size:"16"}),h(" All collections ")]),e("div",Qe,[e("span",We," Available cards "+i(a.availableCards.length),1),e("div",null,[o(z,{modelValue:r.search,"onUpdate:modelValue":t[3]||(t[3]=l=>r.search=l),placeholder:"Search..."},null,8,["modelValue"])])]),e("div",Xe,[(d(!0),n(p,null,M(a.availableCards,(l,f)=>(d(),G(y,{key:f,card:l,onToggleCard:a.toggleCard},null,8,["card","onToggleCard"]))),128))])])):(d(),n("div",Je,[(d(!0),n(p,null,M(r.collections,(l,f)=>(d(),n("button",{key:f,class:"border hover:shadow-md rounded overflow-hidden",onClick:x=>a.selectCollection(l)},[e("img",{src:l.artwork,class:"w-full h-24 object-cover"},null,8,Oe),e("div",Ye,[e("span",Ze,i(l.name),1),e("span",qe,i(l.cards.length)+" cards",1)])],8,Ke))),128))]))])])])]),r.showModal?(d(),n("div",$e,[e("div",es,[o(y,{card:r.selectedCardForModal,onToggleCard:a.toggleCard},null,8,["card","onToggleCard"]),o(v,{class:"mt-4 w-full",onClick:a.closeModal},{default:u(()=>[h("Close")]),_:1},8,["onClick"])])])):C("",!0)],64)}const rs=N(ge,[["render",ss],["__scopeId","data-v-80694201"]]);export{rs as default};
