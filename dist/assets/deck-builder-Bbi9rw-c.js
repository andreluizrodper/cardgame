import{E as M,_ as S,r as m,o as d,c as n,a as e,t as i,b as t,h,e as g,C as B,I as D,f as H,G as j,H as E,w as u,F as p,m as y,J as L,K as G,d as I}from"./index-zeHrmG7h.js";import{H as A,E as F,G as R,S as U,M as O}from"./mana-BkQ1J12w.js";import{H as J}from"./heart-CCxernIS.js";import{S as K,G as Y,C as Z,a as q}from"./sword-Cnc4GbwN.js";import{a as P,u as Q,c as W}from"./deck-CUCn8pJl.js";/**
 * @license lucide-vue-next v0.390.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=M("ChevronLeftIcon",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-vue-next v0.390.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=M("EyeIcon",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),ee={components:{Heart:J,Sword:K,Gem:Y},props:{artwork:{type:String},card:{type:Object}},emits:["toggleCard"],methods:{toggleCard(){this.$emit("toggleCard",this.card)}}},se={class:"relative"},te=["src"],oe={class:"absolute top-2 right-2 border rounded bg-white px-1 text-xs shadow-sm"},ae={class:"text-base flex-1 text-left px-2 py-2"},le={class:"p-2 pb-1 flex flex-col w-full"},de={key:0,class:"flex justify-between w-full"},re={class:"flex gap-2"},ne={class:"flex gap-2 items-center"},ce={class:"flex gap-2 items-center"},ie={class:"flex gap-2 items-center"},me={key:1,class:"flex justify-between w-full"},he={class:"flex gap-2 items-center"};function ue(s,o,c,N,r,a){const b=m("Sword"),k=m("Heart"),_=m("Gem");return d(),n("button",{onClick:o[0]||(o[0]=(...C)=>a.toggleCard&&a.toggleCard(...C)),class:"border rounded bg-white min-w-48 max-w-48 max-auto flex flex-col flex-1"},[e("div",se,[e("img",{src:c.card.artwork},null,8,te),e("div",oe,i(c.card.manaType??c.card.type),1)]),e("div",ae,i(c.card.name),1),e("div",le,[c.card.manaNeeded?(d(),n("div",de,[e("div",re,[e("div",ne,[t(b,{size:"16"}),h(" "+i(c.card.attack),1)]),e("div",ce,[t(k,{size:"16"}),h(" "+i(c.card.defense),1)])]),e("div",ie,[t(_,{size:"16"}),h(" "+i(c.card.manaNeeded),1)])])):g("",!0),c.card.manaValue?(d(),n("div",me,[e("div",he,[t(_,{size:"16"}),h(" "+i(c.card.manaValue),1)])])):g("",!0)])])}const _e=S(ee,[["render",ue]]),fe={components:{NavBar:B,ChevronLeft:X,Input:D,Card:_e,ChevronDown:Z,ChevronUp:q,Button:H,ChevronRight:j,Home:E,Eye:$},computed:{buttonText(){return this.$route.params.id?"Save":"Create"},spellCardsCount(){return this.selectedCards.filter(s=>s.manaNeeded).length},manaCardsCount(){return this.selectedCards.filter(s=>s.manaValue).length},selectedCardsCount(){return this.selectedCards.length},selectedCardsNames(){return this.selectedCards.map(s=>s.name)},availableCards(){const s=this.search.toLowerCase();return this.cards.filter(o=>!this.selectedCardsNames.includes(o.name)).filter(o=>o.name.toLowerCase().includes(s))},isValid(){return this.name.length>4&&this.spellCardsCount>=40}},data(){return{collectionSelected:!1,search:"",selectedCards:[],artwork:null,cards:[],name:"",collectionName:null,collections:[A,F,R,U,O],hoveredCard:null,showModal:!1,selectedCardForModal:null}},async mounted(){if(this.$route.params.id){const s=await P(this.$route.params.id);this.name=s.data().name,this.selectedCards=s.data().cards}},methods:{selectCollection(s){this.collectionSelected=!0,this.collectionName=s.name;const o=s.cards.map(c=>({...c,artwork:s.artwork}));this.cards=o},toggleCard(s){if(this.selectedCards.includes(s)){const o=this.selectedCards.indexOf(s);this.selectedCards.splice(o,1)}else this.selectedCards.push(s)},save(){this.$route.params.id?(Q({id:this.$route.params.id,data:{name:this.name,cards:this.selectedCards}}),this.$store.commit("addToast",{description:"Deck updated!"})):(W({data:{name:this.name,cards:this.selectedCards}}),this.$store.commit("addToast",{description:"Deck created!"})),this.$router.push({name:"decks"})},removeAllCards(){this.selectedCards=[]},showCardDetails(s){this.selectedCardForModal=s,this.showModal=!0},closeModal(){this.showModal=!1,this.selectedCardForModal=null}}},ge={class:"bg-stone-500"},Ce={class:"flex min-h-[100vh] flex-col md:mx-auto max-w-7xl shadow bg-white"},xe={class:"sticky top-0 left-0 right-0 flex flex-col z-30"},ve={class:"flex flex-col py-3 border-b bg-gray-100 gap-2"},pe={class:"px-4 text-sm flex gap-2 items-center"},be={key:0},ke={key:1},we={class:"flex justify-between px-4 items-center"},ye={class:"max-w-96 w-full"},ze={class:"flex gap-4 items-center"},Me=e("div",null,null,-1),Se={class:"px-4 py-2 flex items-center justify-between"},Ne={class:"flex items-center gap-2"},Ve={class:"border rounded px-4 bg-gray-50 py-1 text-sm"},Te={class:"border rounded px-4 bg-gray-50 py-1 text-sm"},Be={class:"flex-1 relative overflow-hidden flex flex-col md:flex-row"},De={class:"w-full md:w-2/6 p-4 order-1 md:order-2"},He=e("h2",{class:"text-xl font-bold mb-4"},"Your Deck",-1),je={class:"grid grid-cols-1 gap-2 h-[200px] md:h-full overflow-y-auto"},Ee={key:0,class:"text-gray-500 text-center"},Le=e("br",null,null,-1),Ge=["onMouseenter","onClick"],Ie={key:0,class:"absolute z-10 right-full top-0 ml-2 hidden md:block"},Ae={class:"w-full md:w-4/6 p-4 border-b md:border-b-0 md:border-r order-2 md:order-1"},Fe=e("h2",{class:"text-xl font-bold mb-4"},"Collection",-1),Re={key:0,class:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 xl:grid-cols-8 gap-2"},Ue=["onClick"],Oe=["src"],Je={class:"px-2 py-2 bg-stone-50 text-gray-800 flex flex-col gap-1"},Ke={class:"text-xs truncate"},Ye={class:"text-xs"},Ze={key:1},qe={class:"flex justify-between mb-4 items-center"},Pe={class:"text-gray-400 text-sm"},Qe={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},We={class:"bg-white p-4 rounded-lg max-w-sm w-full"};function Xe(s,o,c,N,r,a){const b=m("NavBar"),k=m("Home"),_=m("router-link"),C=m("ChevronRight"),z=m("Input"),x=m("Button"),w=m("Card"),V=m("Eye"),T=m("ChevronLeft");return d(),n(p,null,[e("div",ge,[e("div",Ce,[e("div",xe,[t(b),e("div",ve,[e("div",pe,[t(_,{to:{name:"lobby"},class:"flex items-center gap-2 text-sm"},{default:u(()=>[t(k,{size:"16"}),h(" Lobby ")]),_:1}),t(C,{size:"14"}),t(_,{to:{name:"decks"},class:"flex gap-1 items-center text-sm"},{default:u(()=>[h(" My decks ")]),_:1}),t(C,{size:"14"}),s.$route.params.id?(d(),n("span",be," Editing deck ")):(d(),n("span",ke," Creating deck "))]),e("div",we,[e("div",ye,[t(z,{modelValue:r.name,"onUpdate:modelValue":o[0]||(o[0]=l=>r.name=l),placeholder:"Deck name"},null,8,["modelValue"])]),e("div",ze,[Me,t(x,{size:"sm",disabled:!a.isValid,onClick:a.save},{default:u(()=>[h(i(a.buttonText),1)]),_:1},8,["disabled","onClick"])])])])]),e("div",Se,[e("div",Ne,[e("div",Ve,i(a.spellCardsCount)+" cards ",1),e("div",Te,i(a.manaCardsCount)+" mana cards ",1)]),t(x,{size:"sm",onClick:a.removeAllCards,disabled:r.selectedCards.length===0},{default:u(()=>[h(" Remove All Cards ")]),_:1},8,["onClick","disabled"])]),e("div",Be,[e("div",De,[He,e("div",je,[r.selectedCards.length===0?(d(),n("div",Ee,[h(" No cards in your deck. "),Le,h(" Add cards from the collection. ")])):g("",!0),(d(!0),n(p,null,y(r.selectedCards,(l,f)=>(d(),n("div",{key:f,class:"relative"},[e("div",{class:"border rounded p-2 cursor-pointer hover:shadow-md transition-shadow",onMouseenter:v=>r.hoveredCard=l,onMouseleave:o[1]||(o[1]=v=>r.hoveredCard=null),onClick:v=>a.toggleCard(l)},i(l.name),41,Ge),r.hoveredCard===l?(d(),n("div",Ie,[t(w,{card:l,onToggleCard:a.toggleCard},null,8,["card","onToggleCard"])])):g("",!0),t(x,{class:"absolute top-0 right-0 p-1 lg:hidden",size:"sm",onClick:G(v=>a.showCardDetails(l),["stop"])},{default:u(()=>[t(V,{size:"16"})]),_:2},1032,["onClick"])]))),128))])]),e("div",Ae,[Fe,r.collectionSelected?(d(),n("div",Ze,[e("button",{class:"flex gap-2 items-center mb-4",onClick:o[2]||(o[2]=l=>r.collectionSelected=!1)},[t(T,{size:"16"}),h(" All collections ")]),e("div",qe,[e("span",Pe," Available cards "+i(a.availableCards.length),1),e("div",null,[t(z,{modelValue:r.search,"onUpdate:modelValue":o[3]||(o[3]=l=>r.search=l),placeholder:"Search..."},null,8,["modelValue"])])]),e("div",{class:"flex flex-wrap gap-2 items-center justify-center",style:L(s.gridStyle)},[(d(!0),n(p,null,y(a.availableCards,(l,f)=>(d(),I(w,{key:f,card:l,onToggleCard:a.toggleCard},null,8,["card","onToggleCard"]))),128))],4)])):(d(),n("div",Re,[(d(!0),n(p,null,y(r.collections,(l,f)=>(d(),n("button",{key:f,class:"border hover:shadow-md rounded overflow-hidden",onClick:v=>a.selectCollection(l)},[e("img",{src:l.artwork,class:"w-full h-24 object-cover"},null,8,Oe),e("div",Je,[e("span",Ke,i(l.name),1),e("span",Ye,i(l.cards.length)+" cards",1)])],8,Ue))),128))]))])])])]),r.showModal?(d(),n("div",Qe,[e("div",We,[t(w,{card:r.selectedCardForModal,onToggleCard:a.toggleCard},null,8,["card","onToggleCard"]),t(x,{class:"mt-4 w-full",onClick:a.closeModal},{default:u(()=>[h("Close")]),_:1},8,["onClick"])])])):g("",!0)],64)}const as=S(fe,[["render",Xe]]);export{as as default};
